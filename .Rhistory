kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
x <- df %>% filter(wave == 0) %>% rowwise() %>% mutate_at(c("fee_entry", "fee_formation", "fee_liberation", "fee_materials", "fee_contract", "fee_application"), ~./4) %>% mutate_at(c("allow_food", "allow_transport", "allow_pocket_money", "allow_other"), ~.*5*4*FS4.1) %>%
mutate_at(c(vars(contains("FE5.1"))), ~.*FS4.1/FS6.1) %>%
select("FS1.2", "SELECTED", "annual_fees", "fee_entry", "fee_formation", "fee_liberation", "fee_materials", "fee_contract", "fee_application", "annual_app_prod", "total_benefits", "annual_allowances", "allow_food", "allow_transport", "allow_pocket_money", "allow_other", "annual_training_costs", contains("FE5.1"), "annual_foregone_prod", "total_costs", contains("cb")) %>%
mutate_at(c("annual_fees", "fee_entry", "fee_formation", "fee_liberation", "fee_materials", "fee_contract", "fee_application", "annual_app_prod", "total_benefits", "annual_allowances", "allow_food", "allow_transport", "allow_pocket_money", "allow_other", "annual_training_costs", "FE5.1_1", "FE5.1_2", "FE5.1_3", "FE5.1_4", "annual_foregone_prod", "total_costs", "cb_I", "cb_II", "cb_III", "cb_IV", "cb_V"), ~./605) %>% ungroup() %>%
mutate(SELECTED = factor(SELECTED, levels = c(1, 0, 3), labels = c('CQP Selected', 'CQP Not Selected', 'Did Not Apply')))
var_label(x$annual_fees) <- "Fees¹"
var_label(x$fee_entry) <- "Entry"
var_label(x$fee_formation) <- "Formation"
var_label(x$fee_liberation) <- "Liberation"
var_label(x$fee_materials) <- "Materials"
var_label(x$fee_contract) <- "Contract"
var_label(x$fee_application) <- "Application"
var_label(x$annual_app_prod) <- "Apprentice prod."
var_label(x$total_benefits) <- "Total"
var_label(x$annual_allowances) <- "Allowances¹"
var_label(x$allow_food) <- "Food"
var_label(x$allow_transport) <- "Transport"
var_label(x$allow_pocket_money) <- "Pocket money"
var_label(x$allow_other) <- "Other"
var_label(x$annual_training_costs) <- "Training costs"
var_label(x$FE5.1_1) <- "Rent"
var_label(x$FE5.1_2) <- "Equipment"
var_label(x$FE5.1_3) <- "Books"
var_label(x$FE5.1_4) <- "Raw materials"
var_label(x$annual_foregone_prod) <- "Lost trainer prod."
var_label(x$total_costs) <- "Total"
var_label(x$cb_I) <- "Model I"
var_label(x$cb_II) <- "Model II"
var_label(x$cb_III) <- "Model III"
var_label(x$cb_IV) <- "Model IV"
var_label(x$cb_V) <- "Model V"
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova", adj.vars = FS1.2) %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
help(ancova)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova") %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_difference(adj.vars = FS1.2) %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = FS1.2) %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = "FS1.2") %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ adj.vars = "FS1.2") %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ adj.vars = FS1.2) %>%
add_overall() %>%
add_n() %>%
modify_footnote(update = everything() ~ NA) %>%
modify_header(update = list(all_stat_cols(FALSE) ~ "**{level}**",
stat_0 ~ "**Overall**",
p.value = "**p-value²**")) %>%
as_kable_extra(caption = "Annual costs and benefits per apprentice accruing to firm",
booktabs = T,
linesep = "",
position = "H") %>%
kableExtra::group_rows(start_row = 1,
end_row = 9,
group_label = "Benefits") %>%
kableExtra::group_rows(start_row = 10,
end_row = 21,
group_label = "Costs") %>%
kableExtra::group_rows(start_row = 22,
end_row = 26,
group_label = "Net Benefits") %>%
kableExtra::add_indent(c(2:7), level_of_indent = 1) %>%
kableExtra::add_indent(c(11:14), level_of_indent = 1) %>%
kableExtra::add_indent(c(16:19), level_of_indent = 1) %>%
kableExtra::row_spec(c(9,21),bold=T) %>%
kableExtra::kable_styling(latex_options="scale_down") %>%
footnote(general = "Mean (SD). Amounts in \\\\$US per apprentice per year. Calculated using responses from baseline survey, except training costs which were not elicited until endline. Net benefits not computed for rows missing data for any of the categories used included in a given model (some combination of fees, apprentice productivity, allowances, training costs, and lost trainer productivity). Mean net benefit may deviate from sum of means of the relevant categories as a result.",
number = c("Fees and allowances reported by firm owner. Annual fees assume apprenticeship duration of four years, annual allowances assume apprentices work 20 days a month.", "Analysis of variance"),
threeparttable = T,
escape = F,
fixed_small_size = T,
general_title = "")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ "ancova", adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ test = "ancova", adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ test = "ancova", adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(everything ~ test = "ancova")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2,
adj.vars = "FS1.2") %>%
add_p(test = everything() ~ "ancova")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova", adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = c(FS1.2))
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = c("FS1.2"))
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = "FS1.2")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(adj.vars = FS1.2)
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova")
tbl_summary(x, by = as.factor(SELECTED),
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = everything() ~ "ancova")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(test = annual_fees ~ "ancova")
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(list(all_continuous() ~ "ancova"))
tbl_summary(x, by = SELECTED,
type = everything() ~ "continuous",
statistic = all_continuous() ~ c("{mean} ({sd})"),
include = -c(FS1.2, SELECTED),
missing = "no",
digits = everything() ~ 2) %>%
add_p(list(all_continuous() ~ "ancova"), adj.vars = FS1.2)
df$yos
table(YS3.15)
table(df$YS3.15)
table(as.numeric(df$YS3.15))
df$did <- ifelse(df$SELECTED == 1, (as.numeric(df$SELECTED)-1)*df$wave, 0)
df$did2 <- ifelse(df$SELECTED == 3, (as.numeric(df$SELECTED)-2)*df$wave, 0)
x <- df %>% mutate(total_apps = selected + not_selected + did_not_apply,
firm_size_sans_app = ifelse(firm_size_sans_app > 1, log(firm_size_sans_app), NA),
yos = as.numeric(YS3.15),
SELECTED = factor(SELECTED, levels = c(1, 0, 3), labels = c('CQP Selected', 'CQP Not Selected', 'Did Not Apply')))
m1 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m2 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
m3 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + did2 + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m4 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + did2 + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
m5 <- lm(comp_all_trades ~  as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m6 <- lm(comp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
m7 <- lm(comp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + did2 + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m8 <- lm(comp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + did2 + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
m9 <- lm(skills_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m10 <- lm(skills_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
m11 <- lm(skills_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m12 <- lm(skills_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
stargazer(m1, m3, m4, m5, m7, m8, m9, m11, m12, df = FALSE, omit = "FS1.2", font.size= "scriptsize", column.sep.width = "-8pt",
no.space = TRUE, digits = 2, header = F, table.placement = "H",
notes = c("$^1$Years of training prior to baseline survey",
"$^2$Excluding apprentices."),
notes.align = "r",
notes.append = TRUE,
covariate.labels = c("CQP Selected (reference) \\\\ \\\\ CQP Not Selected",
"CQP Did Not Apply",
"Endline",
"CQP Selected x Endline",
"CQP Did Not Apply x Endline",
"Baseline Experience$^1$",
"Years of Schooling",
"Firm Size$^2$",
"Total Apprentices in Firm"),
title = "Effects of training on human capital development",
omit.stat=c("aic", "bic", "adj.rsq", "ser"),
dep.var.labels = c("Experience", "Competence", "Knowledge"),
model.names = FALSE,
dep.var.caption = "",
label = "tab:appreg",
add.lines = list(c("Firm FE", "NO", "NO", "YES", "NO", "NO", "YES", "NO", "NO", "YES")))
# interaction term
df$did <- ifelse(df$SELECTED == 1, (as.numeric(df$SELECTED)-1)*df$wave, 0)
df$did2 <- ifelse(df$SELECTED == 3, (as.numeric(df$SELECTED)-2)*df$wave, 0)
x <- df %>% mutate(total_apps = selected + not_selected + did_not_apply,
firm_size_sans_app = ifelse(firm_size_sans_app > 1, log(firm_size_sans_app), NA),
yos = as.numeric(YS3.15),
SELECTED = factor(SELECTED, levels = c(1, 0, 3), labels = c('CQP Selected', 'CQP Not Selected', 'Did Not Apply')))
m1 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
m2 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + baseline_duration + yos + firm_size_sans_app + total_apps + as.factor(FS1.2), data = x)
m3 <- lm(exp_all_trades ~ as.factor(SELECTED) + as.factor(wave) + did + did2 + baseline_duration + yos + firm_size_sans_app + total_apps, data = x)
x$yos
x$exp_all_trades
sum(is.na(fs))
is.na(fs)
colSums(is.na(fs))
colSums(is.na(fs)), sort
sort(colSums(is.na(fs)))
table(fs$FS2.19)
table(fs$FS2.22)
